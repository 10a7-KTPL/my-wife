<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’– Em cÆ°á»›i anh nhÃ©? ğŸ’–</title>
<style>
body {margin:0;height:100vh;background:linear-gradient(135deg,#ffb6c1,#fff0f5);
display:flex;justify-content:center;align-items:center;flex-direction:column;overflow:hidden;
font-family:"Segoe UI", cursive;color:#e91e63;text-align:center;}
h1{font-size:2.5em;text-shadow:0 0 10px #fff;margin:0;}
p{font-size:1.3em;line-height:1.6em;}
button{margin:10px;background-color:#ff69b4;border:none;color:white;padding:12px 25px;font-size:1.1em;
border-radius:25px;cursor:pointer;box-shadow:0 0 10px #ffb6c1;transition:all 0.3s;}
button:hover{transform:scale(1.1);background-color:#ff85c1;}
.heart{position:fixed;bottom:0;font-size:20px;color:#ff69b4;animation:floatUp 5s linear infinite;}
@keyframes floatUp{0%{transform:translateY(0) scale(1);opacity:1;}100%{transform:translateY(-100vh) scale(1.8);opacity:0;}}
#surpriseScreen,#wishScreen{display:none;position:fixed;inset:0;background:linear-gradient(135deg,#ffb6c1,#fff0f5);
flex-direction:column;justify-content:flex-start;align-items:center;z-index:9999;color:#e91e63;text-align:center;overflow:hidden;}
#timelineCanvas{position:absolute;top:0;left:50%;transform:translateX(-50%);}
.milestone{position:absolute;opacity:0;width:200px;text-align:center;transition:opacity 1s;}
.milestone img{width:150px;height:150px;border-radius:10px;margin-top:5px;object-fit:cover;}
#startScreen img{width:250px;height:250px;border-radius:20px;margin-bottom:15px;object-fit:cover;}
#wishScreen img{position:absolute;width:100px;height:100px;border-radius:10px;object-fit:cover;opacity:0;transition:all 1s;}
#wishScreen h1{margin-top:50px;font-size:2em;}
#wishScreen p{margin:20px;font-size:1.3em;line-height:1.6em;}
</style>
</head>
<body>

<div id="startScreen">
  <img src="https://picsum.photos/300/300?random=1" alt="áº¢nh lÃ£ng máº¡n">
  <h1>Em cÆ°á»›i anh nhÃ©? ğŸ’–</h1>
  <div>
    <button id="yesBtn">Äá»“ng Ã½ ğŸ’</button>
    <button id="noBtn">KhÃ´ng ğŸ˜…</button>
  </div>
</div>

<div id="surpriseScreen">
  <h1>ğŸ’– Ká»· niá»‡m cá»§a chÃºng ta ğŸ’–</h1>
  <canvas id="timelineCanvas" width="800" height="600"></canvas>
</div>

<div id="wishScreen">
  <h1>ğŸ‰ Lá»i chÃºc cá»§a anh dÃ nh cho em ğŸ‰</h1>
  <p>ChÃºc em sinh nháº­t tháº­t háº¡nh phÃºc, luÃ´n cÆ°á»i ráº¡ng rá»¡, vÃ  nhá»¯ng khoáº£nh kháº¯c ngá»t ngÃ o nháº¥t luÃ´n bÃªn chÃºng ta! ğŸ’</p>
</div>

<audio id="bgMusic" loop autoplay>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0e72cfa34f.mp3?filename=love-11206.mp3" type="audio/mp3">
</audio>

<script>
// Tim bay
function createHeart(){const h=document.createElement("div");h.className="heart";h.textContent="ğŸ’–";
h.style.left=Math.random()*100+"vw";h.style.fontSize=Math.random()*20+15+"px";
h.style.animationDuration=Math.random()*3+4+"s";document.body.appendChild(h);
setTimeout(()=>h.remove(),5000);}
setInterval(createHeart,300);

// NÃºt Äá»“ng Ã½
document.getElementById('yesBtn').onclick=()=>{document.getElementById('startScreen').style.display='none';startSurpriseScreen();}

// NÃºt KhÃ´ng nháº£y lung tung
const noBtn=document.getElementById('noBtn');
noBtn.onclick=noBtn.onmouseover=()=>{const x=Math.random()*(window.innerWidth-noBtn.offsetWidth);
const y=Math.random()*(window.innerHeight-noBtn.offsetHeight);noBtn.style.position='absolute';
noBtn.style.left=x+'px';noBtn.style.top=y+'px';}

// MÃ n hÃ¬nh ká»· niá»‡m vá»›i canvas sá»£i chá»‰ uá»‘n lÆ°á»£n
function startSurpriseScreen(){
  const screen=document.getElementById('surpriseScreen');screen.style.display='flex';
  const canvas=document.getElementById('timelineCanvas');
  const ctx=canvas.getContext('2d');
  const milestones=[
    {text:"NgÃ y chÃºng ta gáº·p láº§n Ä‘áº§u: 14/02/2022", img:"https://picsum.photos/150/150?random=2"},
    {text:"NgÃ y chÃ­nh thá»©c yÃªu nhau: 01/03/2022", img:"https://picsum.photos/150/150?random=3"},
    {text:"Chuyáº¿n du lá»‹ch Ä‘Ã¡ng nhá»›: 12/08/2022", img:"https://picsum.photos/150/150?random=4"},
    {text:"Sinh nháº­t Ä‘áº§u tiÃªn bÃªn nhau: 15/11/2022", img:"https://picsum.photos/150/150?random=5"},
    {text:"NgÃ y hÃ´m nay: 12/11/2025", img:"https://picsum.photos/150/150?random=6"}
  ];
  
  const milestoneEls=[];
  milestones.forEach((ms,index)=>{
    const el=document.createElement('div');el.className='milestone';
    el.style.left=(index%2===0 ? '10%':'60%');el.innerHTML=`<p></p><img src="${ms.img}" />`;
    screen.appendChild(el);milestoneEls.push(el);
  });

  let progress=0;
  const total=canvas.height-50;
  function drawLine(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.beginPath();ctx.moveTo(canvas.width/2,0);
    const segments=100;
    for(let i=0;i<=segments;i++){
      const t=i/segments*progress;
      const x=canvas.width/2+50*Math.sin(t*2*Math.PI/100);
      const y=t;ctx.lineTo(x,y);
    }
    ctx.strokeStyle='white';ctx.lineWidth=2;ctx.stroke();
  }

  const interval=setInterval(()=>{
    progress+=2;
    if(progress>total)progress=total;
    drawLine();
    milestoneEls.forEach((el,index)=>{
      const milestoneY=(index/(milestoneEls.length-1))*total;
      const p=el.querySelector('p');
      const text=milestones[index].text;
      if(progress>=milestoneY && p.textContent.length===0){
        // Typewriter
        let i=0;function step(){if(i<text.length){p.textContent+=text.charAt(i);i++;setTimeout(step,50);}
        else if(index===milestoneEls.length-1) showFinalScreen();}
        step();el.style.opacity=1;
        el.style.top=milestoneY+'px';
      }
    });
    if(progress>=total)clearInterval(interval);
  },50);
}

// Confetti vÃ  mÃ n hÃ¬nh cuá»‘i
function showFinalScreen(){
  for(let i=0;i<150;i++){
    const c=document.createElement('div');c.className='confetti';
    c.style.background=['#ff0','#f0f','#0ff','#fff','#f90'][Math.floor(Math.random()*5)];
    c.style.left=Math.random()*window.innerWidth+'px';
    c.style.top='-10px';c.style.width='10px';c.style.height='10px';
    c.style.position='fixed';document.body.appendChild(c);
    let speed=Math.random()*5+2;
    const fall=setInterval(()=>{
      c.style.top=(parseFloat(c.style.top)+speed)+'px';
      if(parseFloat(c.style.top)>window.innerHeight){clearInterval(fall);c.remove();}
    },30);
  }
  setTimeout(()=>{
    document.getElementById('surpriseScreen').style.display='none';
    const wish=document.getElementById('wishScreen');wish.style.display='flex';
    // Hiá»‡u á»©ng áº£nh liÃªn tá»¥c
    const imgs=[2,3,4,5,6].map(i=>{
      const im=document.createElement('img');
      im.src=`https://picsum.photos/150/150?random=${i}`;
      wish.appendChild(im);return im;
    });
    let idx=0;setInterval(()=>{
      imgs[idx].style.opacity=1;idx=(idx+1)%imgs.length;
    },500);
    // Tim bay tiáº¿p tá»¥c
    setInterval(createHeart,300);
  },1500);
}
</script>

</body>
</html>
